================================================================================
В работе  IChat v.1.3b3 есть следующие неточности:
--------------------------------------------------------------------------------
1. Когда IChat не знает о существовании линии на удаленном компе и из этой
   линии приходит REFRESH он не добавляет (!!!) эту линии в список линий.
  Это очень важно т.к. пользователи, зная что эта линия есть, но они ее не видят
  начинают нервничать выходят/заходят в чат. Это создает дополнительную нагрузку
  на сервер.
2. Если на удаленном компе создана линия (в ней только один участник-создатель),
  а потом удаленный юзер из нее выходит (т.е. владелец уничтожает пустую линию)
  посылая DISCONNECT всем '*', то IChat не убирает эту линию из своего списка.
  В результате если войти в эту линию, то информация об этом будет переда лишь
  после отправки REFRESH из этой линии.
3. Найден очень большой глюк в работе см. версия 0.451
4. Обнаружен баг в IChat 1.3b3 в команде REFRESH_BOARD!
   Вместо номера сообщения приходит %d.
   iChat%d192.168.1.4/ANDREY/UserREFRESH_BOARD






================================================================================
Список ошибок, которые мне известны в DreamChat:
v. Dream Chat | (v. MailSlot Kernel)
================================================================================

--------------------------------------------------------------------------------
v. 0.01 (v. 0.11)
--------------------------------------------------------------------------------
[-] Длина сообщения ограничена 450(424?) символами (одним SMB пакетом).
    На самом деле это касается только broadcast'ов в доменах на NT/2000/XP,
    но все же дополнительная проверка не помешает.
    Причина: не доделано
    Устранение: в будущих версиях DChat

[-] Возможно, сообщения в DChat приходят/отображаются в неправильном порядке.
    Причина: номера не проверяются
    Устранение: в будущих версиях MSKrnl/DChat

--------------------------------------------------------------------------------
v. 0.02 (v. 0.11)
--------------------------------------------------------------------------------
--------------------------------------------------------------------------------
v. 0.03 (v. 0.11)
--------------------------------------------------------------------------------
--------------------------------------------------------------------------------
v. 0.204 (v. 0.20)
--------------------------------------------------------------------------------
--------------------------------------------------------------------------------
v. 0.208 (v. 0.24)
--------------------------------------------------------------------------------
[-] При входе в личный чат заново перечитываются настройки пользователя.
--------------------------------------------------------------------------------
v. 0.209 (v. 0.24)
--------------------------------------------------------------------------------
--------------------------------------------------------------------------------
v. 0.220 (v. 0.25)
--------------------------------------------------------------------------------
[-] Нет обработки ошибок при воспроизведении звуков.
--------------------------------------------------------------------------------
v. 0.224 (v. 0.25)
--------------------------------------------------------------------------------
--------------------------------------------------------------------------------
v. 0.300 (v. 0.28)
--------------------------------------------------------------------------------
[-] Небольшие глюки с выделениями смайлов.
--------------------------------------------------------------------------------
--------------------------------------------------------------------------------
v. 0.310 (v. 0.28)
--------------------------------------------------------------------------------
--------------------------------------------------------------------------------
v. 0.323 (TCP v. 0.1)
--------------------------------------------------------------------------------
[-] Как мог пытался оградить tcpkrnl.dll от декодирования мусора, но иногда
    все-таки DLL тихо умирает и убивает весь чат =)). Хотя в 99% случаев
    tcpkrnl.dll успешно отбивается от потока нечистот, поругиваясь в лог:

    TCPKRNL Exception! EConvertError : 'шS"ь<Z~cЁЪ' is not a valid integer value
--------------------------------------------------------------------------------
v. 0.350 (TCP v. 0.4)
--------------------------------------------------------------------------------
[-] Возможны проблемы с уникальностью ников. Функция GetUniqueNickName() не
    обеспечивает 100% уникальности! Т.е. если кто-то специально взял себе ник
    с ИменемКомпа_Ником, то GetUniqueNickName() вернет уже существующий ник.
    Лень было рекурсию писать, чуть позже вернусь...
--------------------------------------------------------------------------------
v. 0.356 (TCP v. 0.5)
--------------------------------------------------------------------------------
--------------------------------------------------------------------------------
v. 0.401 (TCP v. 0.5)
--------------------------------------------------------------------------------
[-] сразу после постига объявы не срабатывает линк на сетевой ресурс...
[-] при вставке из буфера обмена в MEMO, вместо русских букв ?????????
[-] баг в компоненте! не отображается символ Перевод строки + Возврат коретки.
[-] На маилслотах собственная доска объяв не отрисовывается, если ее размер
    очень большой.
[-] команда /nickname изменяет ник только в главной линии.
--------------------------------------------------------------------------------
v. 0.441 (TCP v. 0.6)
--------------------------------------------------------------------------------
--------------------------------------------------------------------------------
v. 0.451 (TCP v. 0.6)
--------------------------------------------------------------------------------
[-] Файлы настроек юзеров нужно удалять в ручную ((. Если пользователь давно не
    появлялся в чате его файл все равно будет храниться.
[-] Нет конфига по умолчанию(( Т.е. файл с настройками создается для каждого
    вошедшего в чат пользователя.
[-] Допустим ты заново входишь в чат. А у удаленного пользователя есть открытый
    с тобой приват. Приват посылает тебе REFRESH. DreamChat его ловит и добавляет
    этот приват в список (ВНИМАНИЕ!) ЛИНИЙ этого пользователя. Т.к. по сообщению
    REFRESH не понятно, кто его послал приват или линия!
    В результате этот приват заносится в дерево как линия и при дальнейшей попытке
    раскрыть список его участников получаем глюк!
    Че делать? Думаем... Надо как-то попробывать отличить линию от привата.

    Есть решение! Можно попробывать послать в эту линию/приват Disconnect! Я
    просто выйду из этой линии/привата на удаленном компе... Хотя млин меня там
    и не было уже. Тогда какого хрена мне REFRESH из привата приходит?

    Есть подозрение, что автор чата пытается отличить линию от привата по
    названию. Приваты могут иметь только числовое название. Но тогда почему он
    не ограничил ввод цифр в имена линий?
    Кстати из этой проблемы плавно вытекает проблема ниже:

[-] Офигеть! Вожможно зацикливание IChat при посылке REFRESH! Исходные данные:
Меня в чате нет, у удаленного чела запущен IChat и осталась открытая линия, но
(ВНИМАНИЕ!) название у линии только из цифр! Нажимаем в этой линии REFRESH и
тут у IChat случается маразм...

Пример неправильной работы IChat (если название линии только из цифр):

[15:09:54] Trying connect to 127.0.0.1:6666
Socket access...
Socket Connecting... 
[15:09:54] Connected with 127.0.0.1:6666
iTCniaM ==> [94][$00][192.168.1.4/ANDREY/Admins][$00][FORWARD][$00][*][$00]iChat1192.168.1.4/ANDREY/AdminsDISCONNECTiTCniaM
iTCniaM ==> [139][$00][192.168.1.4/ANDREY/Admins][$00][FORWARD][$00][*][$00]iChat2192.168.1.4/ANDREY/AdminsCONNECTiTCniaMAdminsAndreyВсем привет!*D0.45T060
iTCniaM <-- iChat1192.168.1.4/ANDREY/AdminsDISCONNECTiTCniaM
iTCniaM <-- iChat2192.168.1.4/ANDREY/AdminsCONNECTiTCniaMAdminsAndreyВсем привет!*D0.45T060
[iTCniaM]: Появляется локальный юзер.
Линия iTCniaM добавлена в список линий 192.168.1.4/ANDREY/Admins
0 ==> [109][$00][192.168.1.4/ANDREY/Admins][$00][FORWARD][$00][192.168.1.4/ANDREY/Admins][$00]iChat5192.168.1.4/ANDREY/AdminsBOARD0
iTCniaM <-- iChat5192.168.1.4/ANDREY/AdminsBOARD0

//на этот момент в DChat только я сам

iTCniaM <-- iChat14192.168.1.4/ANDREY/UserREFRESH123456UserAndreyВсем привет!*1.3b30
!!!! <-- iChat14192.168.1.4/ANDREY/UserREFRESH123456UserAndreyВсем привет!*1.3b30
Внимание! Пришло сообщение REFRESH от 192.168.1.4/ANDREY/User но в чате его нет!
Посылаем ему DISCONNECT + CONNECT...
iTCniaM ==> [116][$00][192.168.1.4/ANDREY/Admins][$00][FORWARD][$00][192.168.1.4/ANDREY/User][$00]iChat7192.168.1.4/ANDREY/AdminsDISCONNECTiTCniaM
iTCniaM ==> [183][$00][192.168.1.4/ANDREY/Admins][$00][FORWARD][$00][192.168.1.4/ANDREY/User][$00]iChat8192.168.1.4/ANDREY/AdminsCONNECTiTCniaMAdminsAndreyВсем привет!192.168.1.4/ANDREY/UserD0.45T060
iTCniaM <-- iChat15192.168.1.4/ANDREY/UserCONNECT123456UserAndreyВсем привет!192.168.1.4/ANDREY/Admins1.3b30
//                                               ^^^^^^^  ^^^^^^-не правильная работа IChat!
Внимание! Пришло сообщение CONNECT от 192.168.1.4/ANDREY/User но в чате его нет!
Посылаем ему DISCONNECT + CONNECT...
iTCniaM ==> [117][$00][192.168.1.4/ANDREY/Admins][$00][FORWARD][$00][192.168.1.4/ANDREY/User][$00]iChat11192.168.1.4/ANDREY/AdminsDISCONNECTiTCniaM
iTCniaM ==> [184][$00][192.168.1.4/ANDREY/Admins][$00][FORWARD][$00][192.168.1.4/ANDREY/User][$00]iChat12192.168.1.4/ANDREY/AdminsCONNECTiTCniaMAdminsAndreyВсем привет!192.168.1.4/ANDREY/UserD0.45T060
iTCniaM <-- iChat19192.168.1.4/ANDREY/UserCONNECT123456UserAndreyВсем привет!192.168.1.4/ANDREY/Admins1.3b30
//                                               ^^^^^^^  ^^^^^^-не правильная работа IChat!
Внимание! Пришло сообщение CONNECT от 192.168.1.4/ANDREY/User но в чате его нет!
Посылаем ему DISCONNECT + CONNECT...
//вот так его зацикливает

//РАЗБОР СИТУАЦИИ:
//Какого хрена при нажатии на REFERSH, он шлет мне сообщение CONNECT к
//линии "123456", вместо сообщения REFERSH?!!! В DChat вообще такой линии
//еще нет! В результате мой чат предлагает ему еще раз законектится к главной
//линии, ну а IChat продолжает упорствовать. Офигеть!


Пример правильной работы IChat (если название линии из букв и цифр):

[14:36:58] Trying connect to 127.0.0.1:6666
Socket access...
Socket Connecting... 
[14:36:58] Connected with 127.0.0.1:6666
iTCniaM ==> [94][$00][192.168.1.4/ANDREY/Admins][$00][FORWARD][$00][*][$00]iChat1192.168.1.4/ANDREY/AdminsDISCONNECTiTCniaM
iTCniaM ==> [139][$00][192.168.1.4/ANDREY/Admins][$00][FORWARD][$00][*][$00]iChat2192.168.1.4/ANDREY/AdminsCONNECTiTCniaMAdminsAndreyВсем привет!*D0.45T060
iTCniaM <-- iChat1192.168.1.4/ANDREY/AdminsDISCONNECTiTCniaM
iTCniaM <-- iChat2192.168.1.4/ANDREY/AdminsCONNECTiTCniaMAdminsAndreyВсем привет!*D0.45T060
[iTCniaM]: Появляется локальный юзер.
Линия iTCniaM добавлена в список линий 192.168.1.4/ANDREY/Admins
0 ==> [109][$00][192.168.1.4/ANDREY/Admins][$00][FORWARD][$00][192.168.1.4/ANDREY/Admins][$00]iChat5192.168.1.4/ANDREY/AdminsBOARD0
iTCniaM <-- iChat5192.168.1.4/ANDREY/AdminsBOARD0
iTCniaM <-- iChat25192.168.1.4/ANDREY/UserREFRESHНовая линияUserAndreyВсем привет!*1.3b30
!!!! <-- iChat25192.168.1.4/ANDREY/UserREFRESHНовая линияUserAndreyВсем привет!*1.3b30
Внимание! Пришло сообщение REFRESH от 192.168.1.4/ANDREY/User но в чате его нет!
Посылаем ему DISCONNECT + CONNECT...
iTCniaM ==> [116][$00][192.168.1.4/ANDREY/Admins][$00][FORWARD][$00][192.168.1.4/ANDREY/User][$00]iChat7192.168.1.4/ANDREY/AdminsDISCONNECTiTCniaM
iTCniaM ==> [183][$00][192.168.1.4/ANDREY/Admins][$00][FORWARD][$00][192.168.1.4/ANDREY/User][$00]iChat8192.168.1.4/ANDREY/AdminsCONNECTiTCniaMAdminsAndreyВсем привет!192.168.1.4/ANDREY/UserD0.45T060
iTCniaM <-- iChat26192.168.1.4/ANDREY/UserCONNECTiTCniaMUserAndreyВсем привет!192.168.1.4/ANDREY/Admins1.3b30

//первое нажатие на кнопку REFRESH в линии                ^^^^^^^-правильная работа!  

[iTCniaM]: 2 одинаковых ника! Существующий [192.168.1.4/ANDREY/Admins] Andrey и пришедший [192.168.1.4/ANDREY/User] Andrey
[iTCniaM]: Меняем ник [192.168.1.4/ANDREY/User] Andrey на Andrey_192.168.1.4
Линия iTCniaM добавлена в список линий 192.168.1.4/ANDREY/User
iTCniaM ==> [184][$00][192.168.1.4/ANDREY/Admins][$00][FORWARD][$00][192.168.1.4/ANDREY/User][$00]iChat11192.168.1.4/ANDREY/AdminsCONNECTiTCniaMAdminsAndreyВсем привет!192.168.1.4/ANDREY/UserD0.45T060
0 ==> [121][$00][192.168.1.4/ANDREY/Admins][$00][FORWARD][$00][192.168.1.4/ANDREY/User][$00]iChat12192.168.1.4/ANDREY/AdminsSTATUS0Всем привет!AndreyВсем привет!192.168.1.4/ANDREY/UserD0.45T060
0 ==> [108][$00][192.168.1.4/ANDREY/Admins][$00][FORWARD][$00][192.168.1.4/ANDREY/User][$00]iChat13192.168.1.4/ANDREY/AdminsBOARD0Всем привет!AndreyВсем привет!192.168.1.4/ANDREY/UserD0.45T060
iTCniaM <-- iChat30192.168.1.4/ANDREY/UserREFRESHНовая линияUserAndreyВсем привет!*1.3b30

//второе нажатие на кнопку REFRESH в линии                ^^^^^^^^^^^-правильная работа!  

Линия Новая линия добавлена в список линий 192.168.1.4/ANDREY/User
iTCniaM ==> [184][$00][192.168.1.4/ANDREY/Admins][$00][FORWARD][$00][192.168.1.4/ANDREY/User][$00]iChat17192.168.1.4/ANDREY/AdminsREFRESHiTCniaMAdminsAndreyВсем привет!192.168.1.4/ANDREY/UserD0.45T060

//как видно тут при первом нажатии на кнопку REFRESH IChat правильно отвечает
//на действия DChat

Впрочем такую ситуацию, достаточно сложно создать в реальности...

--------------------------------------------------------------------------------
v. 0.452 (TCP v. 0.6)
--------------------------------------------------------------------------------

================================================================================
Надеюсь когда-нибудь я все это разгребу...
С наилучшими пожеланиями, Баженов Андрей (aka NeyroSpace).